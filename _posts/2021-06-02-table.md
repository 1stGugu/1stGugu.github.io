---
layout: post
title: 테이블 명세서 추출 query
subtitle: MSSQL, MYSQL, ORACLE
cover-img: /assets/img/path.jpg
thumbnail-img: ''
tags: [DEV, DB]
comments: true
---

## 테이블명세서 작성쿼리

**1. MSSQL**
```
select TABLE_NAME,
ORDINAL_POSITION,
COLUMN_NAME,
DATA_TYPE,
CHARACTER_MAXIMUM_LENGTH,
IS_NULLABLE,
COLUMN_DEFAULT
from INFORMATION_SCHEMA.COLUMNS
order by TABLE_NAME, ORDINAL_POSITION;
```

```
--DECLARE @TABLE_NAME NVARCHAR(50) = 'TB_TEST';
SELECT D.COLORDER                AS COLUMN_IDX            -- Column Index
     , A.NAME                    AS TABLE_NAME            -- Table Name
     , C.VALUE                    AS TABLE_DESCRIPTION    -- Table Description
     , D.NAME                    AS COLUMN_NAME            -- Column Name
     , E.VALUE                    AS COLUMN_DESCRIPTION    -- Column Description
     , F.DATA_TYPE                AS TYPE                    -- Column Type
     , F.CHARACTER_OCTET_LENGTH    AS LENGTH                -- Column Length
     , F.IS_NULLABLE            AS IS_NULLABLE            -- Column Nullable
     , F.COLLATION_NAME            AS COLLATION_NAME        -- Column Collaction Name
  FROM SYSOBJECTS A WITH (NOLOCK)
  INNER JOIN SYSUSERS B WITH (NOLOCK)        ON A.UID = B.UID
  INNER JOIN SYSCOLUMNS D WITH (NOLOCK)        ON D.ID = A.ID
  INNER JOIN INFORMATION_SCHEMA.COLUMNS F WITH (NOLOCK)
     ON A.NAME = F.TABLE_NAME
    AND D.NAME = F.COLUMN_NAME
   LEFT OUTER JOIN SYS.EXTENDED_PROPERTIES C WITH (NOLOCK)
     ON C.MAJOR_ID = A.ID
    AND C.MINOR_ID = 0
    AND C.NAME = 'MS_Description'
   LEFT OUTER JOIN SYS.EXTENDED_PROPERTIES E WITH (NOLOCK)
     ON E.MAJOR_ID = D.ID
    AND E.MINOR_ID = D.COLID
    AND E.NAME = 'MS_Description'  
  WHERE 1=1
    AND A.TYPE = 'U'
	--AND A.NAME = @TABLE_NAME
  ORDER BY D.COLORDER
```


**2. MYSQL**
```
select
TABLE_SCHEMA,
TABLE_NAME,
COLUMN_NAME,
DATA_TYPE,
ifnull(CHARACTER_MAXIMUM_LENGTH,ifnull(NUMERIC_PRECISION,''),
IS_NULLABLE
from INFORMATION_SCHEMA.COLUMNS
where TABLE_SCHEMA not in ('information_schema', 'performance_schema', 'mysql', 'isb_stg', 'isb_prd') #제외할 스키마 기입
order by TABLE_SCHEMA, TABLE_NAME, ORDINAL_POSITION;
```

**3. Oracle**
```
select A.TABLE_NAME as "테이블명",
A.COLUMN_NAME as "컬럼명",
A.DATA_TYPE as "데이터타입",
A.DATA_LENGTH as "길이",
A.NULLABLE as "Null 여부",
B.COMMENTS as "Comments"
from dba_tab_columns A,
all_col_comments B
where A.OWNER = B.OWNER
and A.TABLE_NAME = B.TABLE_NAME
and A.COLUMN_NAME = B.COLUMN_NAME
and A.OWNER = 'GUGU_DEV' -- DB명
order by A.TABLE_NAME;
```
